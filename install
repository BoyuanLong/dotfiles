#!/bin/bash

echo "Updating submodules..."
git submodule update --init --recursive
echo "Finished updating submodules"

BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# dotfiles
echo "linking dotfiles directory..."
if [[ ! -f ~/.dotfiles || -L ~/.dotfiles ]]; then
    ln -s ${BASEDIR} ~/.dotfiles
fi

# vim
echo "linking vim files..."
ln -s ${BASEDIR}/vim/ ~/.vim

# shell
echo "linking shell files..."
ln -s ${BASEDIR}/shell/ ~/.shell

# zsh
[ -z $(which zsh) ] && echo "WARNING: No zsh installed!"
echo "linking zsh files..."
ln -s ${BASEDIR}/zsh/ ~/.zsh
ln -s ${BASEDIR}/zsh/zshrc ~/.zshrc

# tmux
[ -z $(which tmux) ] && echo "WARNING: No tmux installed!"
echo "linking tmux files..."
ln -s ${BASEDIR}/tmux/ ~/.tmux
ln -s ${BASEDIR}/tmux/tmux.conf ~/.tmux.conf

# git
echo "================"
echo "Setting up git files..."
gituser=$(git config user.name)
gitemail=$(git config user.email)
if [[ -z $gituser ]]; then
    read -p 'Git Username: ' gituser
    git config --global user.name $gituser
else
    echo "Current git user is: $gituser"
fi

if [[ -z $gitemail ]]; then
    read -p 'Git Email: ' gitemail
    git config --global user.email $gitemail
else
    echo "Current git email is: $gitemail"
fi

git config --global core.excludesfile ~/.dotfiles/git/gitignore_global 
git config --global include.path ~/.dotfiles/git/gitconfig 
# ln -s ${BASEDIR}/git/gitconfig ~/.gitconfig
# ln -s ${BASEDIR}/git/gitignore_global ~/.gitignore_global
